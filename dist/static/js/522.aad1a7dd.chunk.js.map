{"version":3,"file":"static/js/522.aad1a7dd.chunk.js","mappings":"6RAcaA,EAAgB,CAC3B,CAAEC,KAAM,SAAUC,MAAO,kCACzB,CAAED,KAAM,OAAQC,MAAO,cAGZC,GAAeC,EAAAA,EAAAA,IAAW,CACrCC,QAAO,YACLC,EAAAA,EAAAA,IAAc,eAAe,SAACC,EAAOC,GAAS,MAC5CC,QAAQC,IAAI,YAAaF,GAMzBA,EAAKG,cAAc,aAAc,CAACC,OAAkB,QAAX,EAAAL,EAAMK,aAAK,aAAX,EAAaC,gBAAiB,KAGvEL,EAAKM,iBAAiB,CACpBC,SAAU,CAAC,CAAEC,IAAK,MAAOC,IAAK,OAAQ,CAACD,IAAK,MAAOC,IAAK,SAE5D,GACF,IAGWC,GAAcC,EAAAA,EAAAA,IAAkB,CAC3CC,WAAY,CACVC,SAAAA,EAAAA,GACAC,MAAAA,EAAAA,GACAC,OAAAA,EAAAA,GACAC,WAAAA,EAAAA,GACAC,SAAAA,EAAAA,MAISC,EAAkB,CAC7BC,KAAM,SACNC,WAAY,CACVC,WAAY,CACVF,KAAM,SACNzB,MAAO,qBACP4B,UAAU,EACV,cAAe,WACf,cAAe,SAEjBC,WAAY,CACVJ,KAAM,SACNzB,MAAO,2BACP4B,UAAU,EACV,cAAe,WACf,cAAe,SAEjBf,SAAU,CACRY,KAAM,QACN,cAAe,WACf,cAAe,aACf,oBAAqB,CACnBK,WAAY,CAAEC,SAAU,IACxBC,OAAQ,CAAEC,EAAG,SAEfC,MAAO,CACLT,KAAM,SACNC,WAAY,CACVS,QAAS,CACPV,KAAM,OACN,cAAe,oBACf,oBAAqB,CAEnBzB,MAAO,gBAET0B,WAAY,CACVU,IAAK,CACHX,KAAM,OACN,cAAe,sBAIrBY,QAAS,CACPZ,KAAM,OACN,cAAe,oBACf,oBAAqB,CACnBa,SAAU,IACVtC,MAAO,UAET0B,WAAY,CACVZ,IAAK,CACHW,KAAM,SACN,cAAe,QACf,cAAe,cAIrBc,QAAS,CACPd,KAAM,OACN,cAAe,oBACf,oBAAqB,CAEnBa,SAAU,IACVtC,MAAO,UAET0B,WAAY,CACVX,IAAK,CACHU,KAAM,SACN,cAAe,QACf,cAAe,cAIrBe,QAAS,CACPf,KAAM,OACN,cAAe,oBACf,oBAAqB,CACnBzB,MAAO,aACPyC,UAAW,aACXC,MAAO,IACPC,MAAO,SAETjB,WAAY,CACVkB,KAAM,CACJnB,KAAM,OACN,cAAe,WACfC,WAAY,CACVmB,OAAQ,CACNpB,KAAM,OACN,cAAe,qBAEjBqB,SAAU,CACRrB,KAAM,OACN,cAAe,uBAEjBsB,OAAQ,CACNtB,KAAM,OACN,cAAe,2BAQ7BC,WAAY,CACVsB,IAAK,CACHvB,KAAM,OACN,cAAe,sBACfzB,MAAO,gB,+DC5IjB,UAbqB,WAEnB,OADAO,QAAQC,MAEN,gBAAC,KAAI,CACHF,KAAML,EAAAA,aACNgD,SAAU,EACVC,WAAY,IAEZ,gBAAC,EAAAlC,YAAW,CAACmC,OAAQ3B,EAAAA,kBAG3B,C","sources":["views/_component/config.js","views/_component/relationForm.jsx"],"sourcesContent":["import {\r\n  createForm,\r\n  onFieldChange,\r\n  // onFieldReact,\r\n} from '@formily/core';\r\nimport { createSchemaField } from '@formily/react';\r\nimport {\r\n  FormItem,\r\n  Input,\r\n  Select,\r\n  ArrayTable,\r\n  Editable,\r\n} from '@formily/antd';\r\n\r\nexport const DEFAULT_ITEMS = [\r\n  { name: 'sticky', title: 'sticky粘性布局' },\r\n  { name: 'antd', title: 'antd demo' },\r\n];\r\n\r\nexport const formInstance = createForm({\r\n  effects() {\r\n    onFieldChange('.controller', (field, form) => {\r\n      console.log('field: >>', form);\r\n\r\n      // // formInstance和参数form都可  【对于初始联动，如果字段找不到，setFieldState会将更新推入更新队列，直到字段出现再执行操作】\r\n      // // setFieldState(PATH, {...attr})  联动多个字段：PATH='*(path1, path2...pathn)'\r\n\r\n      // //\r\n      form.setFieldState('controlled', {value: field.value?.toUpperCase() || ''});\r\n      // // arraytable\r\n      // form.setFieldState('arrTable', {value: [{column1: 'aaa', column2: 'bbb'}, {column1: 'AAA', column2: 'BBB'}]});\r\n      form.setInitialValues({\r\n        arrTable: [{ bbb: 'bbb', ccc: 'ccc'}, {bbb: 'BBB', ccc: 'CCC'}]\r\n      });\r\n    });\r\n  }\r\n});\r\n\r\nexport const SchemaField = createSchemaField({\r\n  components: {\r\n    FormItem,\r\n    Input,\r\n    Select,\r\n    ArrayTable,\r\n    Editable,\r\n  },\r\n});\r\n\r\nexport const jsonShemaConfig = {\r\n  type: 'object',\r\n  properties: {\r\n    controller: {\r\n      type: 'string',\r\n      title: '控制者',\r\n      required: true,\r\n      'x-decorator': 'FormItem',\r\n      'x-component': 'Input',\r\n    },\r\n    controlled: {\r\n      type: 'string',\r\n      title: '被控制者',\r\n      required: true,\r\n      'x-decorator': 'FormItem',\r\n      'x-component': 'Input',\r\n    },\r\n    arrTable: {\r\n      type: 'array',\r\n      'x-decorator': 'FormItem',\r\n      'x-component': 'ArrayTable',\r\n      'x-component-props': {\r\n        pagination: { pageSize: 10},\r\n        scroll: { x: '100%' }\r\n      },\r\n      items: {\r\n        type: 'object',\r\n        properties: {\r\n          column1: {\r\n            type: 'void',\r\n            'x-component': 'ArrayTable.Column',\r\n            'x-component-props': {\r\n              // width: 140,\r\n              title: '序号',\r\n            },\r\n            properties: {\r\n              aaa: {\r\n                type: 'void',\r\n                'x-component': 'ArrayTable.Index',\r\n              }\r\n            }\r\n          },\r\n          column2: {\r\n            type: 'void',\r\n            'x-component': 'ArrayTable.Column',\r\n            'x-component-props': {\r\n              minWidth: 140,\r\n              title: 'input1',\r\n            },\r\n            properties: {\r\n              bbb: {\r\n                type: 'string',\r\n                'x-component': 'Input',\r\n                'x-decorator': 'Editable',\r\n              }\r\n            }\r\n          },\r\n          column3: {\r\n            type: 'void',\r\n            'x-component': 'ArrayTable.Column',\r\n            'x-component-props': {\r\n              // width: 140,\r\n              minWidth: 140,\r\n              title: 'input2',\r\n            },\r\n            properties: {\r\n              ccc: {\r\n                type: 'string',\r\n                'x-component': 'Input',\r\n                'x-decorator': 'Editable',\r\n              }\r\n            }\r\n          },\r\n          column4: {\r\n            type: 'void',\r\n            'x-component': 'ArrayTable.Column',\r\n            'x-component-props': {\r\n              title: 'Operations',\r\n              dataIndex: 'operations',\r\n              width: 200,\r\n              fixed: 'right',\r\n            },\r\n            properties: {\r\n              item: {\r\n                type: 'void',\r\n                'x-component': 'FormItem',\r\n                properties: {\r\n                  remove: {\r\n                    type: 'void',\r\n                    'x-component': 'ArrayTable.Remove',\r\n                  },\r\n                  moveDown: {\r\n                    type: 'void',\r\n                    'x-component': 'ArrayTable.MoveDown',\r\n                  },\r\n                  moveUp: {\r\n                    type: 'void',\r\n                    'x-component': 'ArrayTable.MoveUp',\r\n                  },\r\n                },\r\n              },\r\n            },\r\n          }\r\n        }\r\n      },\r\n      properties: {\r\n        add: {\r\n          type: 'void',\r\n          'x-component': 'ArrayTable.Addition',\r\n          title: 'Add entry',\r\n        },\r\n      },\r\n    }\r\n  },\r\n};\r\n","import React from 'react';\r\nimport { Form } from '@formily/antd';\r\nimport { SchemaField, formInstance, jsonShemaConfig } from './config';\r\n\r\nconst RelationForm = () => {\r\n  console.log();\r\n  return (\r\n    <Form\r\n      form={formInstance}\r\n      labelCol={5}\r\n      wrapperCol={16}\r\n    >\r\n      <SchemaField schema={jsonShemaConfig} />\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default RelationForm;\r\n"],"names":["DEFAULT_ITEMS","name","title","formInstance","createForm","effects","onFieldChange","field","form","console","log","setFieldState","value","toUpperCase","setInitialValues","arrTable","bbb","ccc","SchemaField","createSchemaField","components","FormItem","Input","Select","ArrayTable","Editable","jsonShemaConfig","type","properties","controller","required","controlled","pagination","pageSize","scroll","x","items","column1","aaa","column2","minWidth","column3","column4","dataIndex","width","fixed","item","remove","moveDown","moveUp","add","labelCol","wrapperCol","schema"],"sourceRoot":""}